# 需求规格说明文档

[TOC]

## 更新记录

| 修改人 | 日期     | 修改内容                 | 版本 |
| ------ | -------- | ------------------------ | ---- |
| 廖均达 | 2018-4-3 | 创建需求规格说明文档初稿 | 0.1  |

## 引言

### 文档编写目的

本文档描述了迭代二众包标注系统的功能需求和非功能需求。开发小组的软件系统实现与验证工作都以此文档为依据。 除特殊说明之外，本文档所包含的需求都是高优先级需求。本说明书的内容可能在项目实施过程中发生变更，但是必须由项目小组成员发出变更请求，小组讨论，最终决定，建立持续有效的版本控制。

### 参考文献

1. 《软件工程与计算（卷二）》
2. 《软件工程与计算（卷三）》
3. 《软件需求规格说明目标（IEEE标准）》

## 项目概述

本项目旨在建立一个众包标注系统。该系统能够接受众包发起者的标注请求，并将请求分发给众包工人，工人在平台进行建议数据标注，系统评估并将标注结果反馈给众包发起者。同时，系统和众包发起者可以评估工人的完成质量并给予奖励；系统具有一个或者多个智能化模块。

### 项目范围说明

#### 项目目标

- 实现一个众包数据标注基础框架
- 发布者能够发布、查看、下载任务及任务相关信息
- 众包工人能够接受任务，执行任务，完成任务，获得奖励，查看个人信息
- 能够查看工人排名，工人能力变化情况、活跃用户变化情况、用户注册变化情况等统计信息

### 项目约束

- CON1：采用Java语言开发
- CON2：系统使用的是PC端的图形界面，评优必须采用web应用
- CON3：迭代I II不允许使用数据库
- CON4：项目建议采用分层模型进行开发
- CON5：项目后期会增加需求及开放式功能
- CON6：将工程行为尽可能地记录在Gitlab上
- CON7：每次迭代产品均必须附带部署说明文档

## 详细需求描述

### 对外接口需求

#### 用户界面[陈俊宇、高梦婷]

*TODO*

### 功能需求

#### 工人信息查询[訾源]

##### 特性描述

##### 刺激/响应序列

##### 相关功能需求

#### 接受任务

##### 特性描述

工人能够查找、获取任务

##### 刺激/响应序列

刺激：工人输入关键字请求搜索任务

响应：系统显示搜索结果

刺激：工人点击任务请求预览

响应：系统显示任务中包含的图片

刺激：工人请求接受选中的任务

响应：系统返回接受任务结果

##### 相关功能需求

| 编号                            | 需求描述                                                     |
| ------------------------------- | ------------------------------------------------------------ |
| RequesterTask.TaskList          | 当用户请求查看已发布任务时系统要将所有的已发布任务组织在列表中展示给用户，列表中的每一项的信息包括任务的进度，结束时间，状态，任务名，任务id五个内容 |
| RequesterTask.TaskDetail        | 当用户请求查看某一个发布的任务的详细信息时，系统要显示该任务的详细信息，详细信息由每个子任务的详细信息组成，包括每个子任务的进度，类型，描述，参与者（子任务的划分参见发起新任务处） |
| RequesterTask.TaskList.Download | 当用户请求获取已经完成的任务的标记结果时，系统要将标记结果发送给用户 |

#### 已发布任务管理

##### 特性描述

任务发布者可以查看已发布任务的信息，包括进度，参与者等

##### 刺激/响应序列

刺激：任务发布者请求查看已发布任务清单

响应：系统显示已发布任务清单

刺激：任务发布者请求查看某个任务的详细信息

响应：系统显示该任务的详细信息

刺激：任务发布者请求获取已完成任务的结果文件（即标记结果）

响应：系统将结果文件发送给发布者

##### 相关功能需求

| 编号                            | 需求描述                                                     |
| ------------------------------- | ------------------------------------------------------------ |
| RequesterTask.TaskList          | 当用户请求查看已发布任务时系统要将所有的已发布任务组织在列表中展示给用户，列表中的每一项的信息包括任务的进度，结束时间，状态，任务名，任务id五个内容 |
| RequesterTask.TaskDetail        | 当用户请求查看某一个发布的任务的详细信息时，系统要显示该任务的详细信息，详细信息由每个子任务的详细信息组成，包括每个子任务的进度，类型，描述，参与者（子任务的划分参见发起新任务处） |
| RequesterTask.TaskList.Download | 当用户请求获取已经完成的任务的标记结果时，系统要将标记结果发送给用户 |

#### 发起新任务

##### 特性描述

任务发布者可以创建新的任务到平台上让众包工人完成

##### 刺激/响应序列

刺激：发布者请求创建新任务

响应：系统显示新建任务需要填写的表单

刺激：发布者上传任务要求的描述信息

响应：系统对该信息进行合法性检查（合法性是指该任务的描述是否在系统支持的范围之内，合法的任务描述文件参见数据需求的task.json文件定义）

刺激：发布者选择要上传的数据集并点击上传

响应：系统显示上传的结果；若成功则显示上传成功；若失败显示上传失败

刺激：发布者填写完所有的内容后点击提交

响应：系统显示“提交成功”并记录操作日志

##### 相关功能需求

| 编号                             | 需求描述                                                     |
| -------------------------------- | ------------------------------------------------------------ |
| NewTask.Input                    | 系统应该允许用户输入任务的基本信息（名称，日期               |
| NewTask.Input.DataSet            | 系统应该允许用户上传数据集                                   |
| NewTask.Input.TaskConfig         | 系统应该允许用户上传任务配置文件                             |
| NewTask.Commit                   | 用户填写完成后请求提交，若提交成功则显示提交成功，如提交失败则显示提交失败 |
| NewTask.Log                      | 用户提交任务成功后系统要对此次提交进行日志记录，包括提交的时间，任务id，发布者id |
| NewTask.Check.TaskConfig.Valid   | 系统要对发布者上传的任务配置文件进行正确性检查，如果检查通过则显示上传成功 |
| NewTask.Check.TaskConfig.Invalid | 系统检查用户上传的任务配置文件发现不正确，则显示验证失败，要求用户上传正确的任务配置文件 |
| NewTask.Check.Incomplete         | 用户请求提交新发布任务信息，系统要对任务信息的完整性进行检查，如果有必须填写的内容为空，则提示要求继续填写任务信息 |

#### 任务结算[todo]

##### 特性描述

##### 刺激/响应序列

##### 相关功能需求

#### 查看网站信息[todo]

##### 特性描述

##### 刺激/响应序列

##### 相关功能需求

#### 执行任务

##### 特性描述

用户执行任务，对数据进行标注时，可以对数据进行整体、局部、区域的标注

##### 刺激/响应序列

刺激：用户请求标注任务

响应：系统加载并显示待标注的数据

刺激：用户对数据进行方框标记

响应：系统显示标记的方框

刺激：用户在方框标记中对内容进行描述

响应：系统要在数据周围显示用户输入的描述

刺激：用户输入对整体数据的描述

响应：系统在数据周围显示用户输入的描述

刺激：用户请求提交此次标注结果

响应：系统显示此次数据标注的结果

刺激：用户请求标注下一份数据

响应：如果数据集中还留有数据则显示下一份数据，没有则提示用户此数据集已标注完成

刺激：用户对数据进行区域描边

响应：系统对被描边区域进行变色显示

刺激：用户对描边区域进行描述

响应：系统在描边区域周围显示用户的描述

刺激：用户请求取消当前标注任务

响应：系统关闭当前任务

刺激：用户请求删除当前标注

响应：系统数据当前的标注内容进行清空

##### 相关功能需求

| 编号                      | 需求描述                                                     |
| ------------------------- | ------------------------------------------------------------ |
| Tag.Input                 | 系统应该允许用户在进行数据标注的过程中使用鼠标、键盘进行输入 |
| Tag.Input.Draw            | 系统应该允许用户在图上进行标记                               |
| Tag.Input.Clear           | 用户请求清空当前的标注信息，系统清空所有标注信息（包括标记、描述） |
| Tag.Input.Draw.Square     | 用户在为数据进行方框标注时，系统要为用户提供方框标注工具     |
| Tag.Input.Draw.Stroke     | 用户在为数据进行区域标注时，系统要为用户提供描边工具         |
| Tag.Input.Describe.Total  | 系统应该允许用户对整个数据进行描述                           |
| Tag.Input.Describe.Stroke | 系统要允许用户对所描区域中的内容进行描述                     |
| Tag.Input.Describe.Square | 系统要允许用户对所标方框中的内容进行描述                     |
| Tag.Data.Load             | 当用户请求数据标注任务时，系统要能够加载待标注的数据并展示   |
| Tag.Data.Next             | 当用户点击下一份数据时，如果数据集中还有剩余的数据，则系统将显示下一份数据，否则系统将提示用户没有剩余的待标注数据 |
| Tag.Commit                | 当用户标注完一份数据时，系统存储用户标记的信息（参见Tag.Update.Data）以及更新日志中用户此次的标注行为（参见Tag.Update.Log），然后显示用户此次的标注结果 |
| Tag.Commit.Done           | 当用户标记完数据集中所有的数据时，系统提示用户数据已经标注完成 |
| Tag.Commit.Incomplete     | 当用户标注未完成（进行了区域标记但是所描边没有围成一个区域；整体、方框或区域缺少对应的描述）就点击提交时，系统将提示用户标注未完成 |
| Tag.Update.Log            | 系统记录并更新用户此次标注行为的信息（消耗时间、数据来源、数据类型） |
| Tag.Update.Data           | 系统记录并存储对此数据的标注信息                             |
| Tag.Show.Square           | 当用户完成对数据的方框标记后，系统在数据中对应的地方显示该方框 |
| Tag.Show.Stroke           | 当用户完成对数据的区域标记后，系统在数据中该区域对应的地方进行变色显示 |
| Tag.Close                 | 用户请求取消当前标注任务，系统要退出当前标注任务             |

#### 查看历史任务

##### 特性描述

用户可以对接受过的历史任务进行查看，可以对已经标注过但还未提交的的数据进行修改

##### 刺激/响应序列

刺激：用户请求查看历史标注信息

响应：系统展示用户已经标注过的数据

刺激：用户选择具体的数据进行查看

响应：系统单独展示该数据（用户标注后的版本）

刺激：用户选择数据进行修改

响应：系统加载该数据等待用户修改

刺激：用户请求保存修改

响应：系统显示保存结果

##### 相关功能需求

| 编号                | 需求描述                                                     |
| ------------------- | ------------------------------------------------------------ |
| History.Data.Load   | 当用户请求查看标注过的数据时，系统要能够加载这些数据并展示   |
| History.Data.Show   | 当用户选择具体的数据进行查看时，系统要能够显示这份数据（包括用户的标注信息） |
| History.Data.Modify | 系统要允许用户修改标注的结果                                 |
| History.Update.Data | 当用户修改完成请求提交时，系统要更新标注的信息               |
| History.Update.Log  | 当用户修改完成且保存成功时，系统要记录用户此次的操作信息（包括时间，操作人账号，操作的数据目标） |

### 数据需求

#### 数据定义

**DR1**：数据集中的每份数据的分辨率应该应该一致

**DR2:**   task.Json 文件格式。将需要的任务类型对应的`json`放入到一个`json`数组中。

1. 对图片整体标问题

```json
{
  "task-type": 100,
  "classes": ["name1", "name2", ...],
  "description": "这是任务描述"
}
```

1. 对图片整体注问题

```json
{
  "task-type": 101,
  "description": "这是任务描述"
}
```

1. 对图片单框标问题

```json
{
  "task-type": 200,
  "classes": ["name1", "name2", ...],
  "description": "这是任务描述"
}
```

1. 对图片单框注问题

```json
{
  "task-type": 201,
  "description": "这是任务描述"
}
```

1. 对图片进行多框标问题

```json
{
  "task-type": 300,
  "classes": ["name1", "name2", ...],
  "description": "这是任务描述"
}
```

1. 对图片多框注问题

```json
{
  "task-type": 301,
  "description": "这是任务描述"
}
```

1. 对图片进行边界标

```json
{
  "task-type": 400,
  "description": "这是任务描述"
}
```

1. 对图片进行边界标并注

```json
{
  "task-type": 401,
  "description": "这是任务描述"
}
```

**DR3**：系统要记录用户的数据标注信息知道任务发布者回收任务